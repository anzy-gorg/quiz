<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Physical Education Quiz (20 Items)</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 30px;
      background-color: #eef6fb;
    }
    h1 {
      text-align: center;
    }
    .question {
      background: #fff;
      padding: 15px;
      margin-bottom: 10px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    input[type="text"] {
      width: 100%;
      padding: 8px;
      margin-top: 8px;
    }
    .answer {
      margin-top: 8px;
      color: green;
      font-weight: bold;
    }
    button {
      display: block;
      margin: 20px auto;
      padding: 10px 30px;
      font-size: 16px;
      cursor: pointer;
    }
    #score {
      text-align: center;
      font-size: 20px;
      margin-top: 20px;
    }
    #popup, #overlay {
      display: none;
      position: fixed;
      top: 0; left: 0;
      width: 100%; height: 100%;
    }
    #overlay {
      background: rgba(0,0,0,0.5);
      z-index: 9;
    }
    #popup {
      background: white;
      border-radius: 10px;
      padding: 20px;
      width: 80%;
      max-width: 600px;
      margin: auto;
      top: 10%;
      left: 0;
      right: 0;
      position: absolute;
      z-index: 10;
      box-shadow: 0 0 20px rgba(0,0,0,0.4);
    }
    #popup h3 {
      margin-top: 0;
    }
  </style>
</head>
<body>

<h1>Physical Education Quiz (20 Items)</h1>
<form id="quizForm"></form>

<button onclick="submitQuiz()">Submit Quiz</button>
<div id="score"></div>

<div id="overlay"></div>
<div id="popup">
  <h3>Correct Answers Summary</h3>
  <ul id="correctAnswersList"></ul>
  <button onclick="closePopup()">Close</button>
</div>

<script>
  const questions = [
    "1. PE is education through ________.",
    "2. Translate: 'mens sana en corpore sano' (3 words).",
    "3. Ability to carry workload and enjoy play.",
    "4. Give one component of physical fitness.",
    "5. A health-related component of fitness.",
    "6. A skill-related component of fitness.",
    "7. Ability of heart, lungs, and vessels to supply nutrients.",
    "8. Max force from muscle group.",
    "9. Strength used in jumping/sprint.",
    "10. Strength used in lifting heavy objects.",
    "11. Strength in repeated contractions.",
    "12. Flexibility of joints.",
    "13. Ratio of fat to lean tissue.",
    "14. Ability to move quickly.",
    "15. Release force in short time.",
    "16. Quick change of direction.",
    "17. Ability to keep body in position.",
    "18. Type of balance when not moving.",
    "19. Type of balance during movement.",
    "20. Time between signal and reaction."
  ];

  const correctAnswers = [
    ["human movement"],
    ["sound body mind"],
    ["physical fitness"],
    ["health related", "skill related"],
    ["strength", "flexibility", "body composition", "cardio-respiratory endurance", "muscular endurance"],
    ["speed", "agility", "power", "reaction time", "coordination", "balance"],
    ["cardio-respiratory endurance"],
    ["strength"],
    ["explosive strength"],
    ["static strength"],
    ["muscular endurance"],
    ["joint flexibility"],
    ["body composition"],
    ["speed"],
    ["power"],
    ["agility"],
    ["balance"],
    ["static balance"],
    ["dynamic balance"],
    ["reaction time"]
  ];

  const form = document.getElementById("quizForm");

  // Render quiz form
  questions.forEach((q, i) => {
    const div = document.createElement("div");
    div.className = "question";
    div.innerHTML = `
      <p>${q}</p>
      <input type="text" name="q${i}">
      <div class="answer" id="a${i}"></div>
    `;
    form.appendChild(div);
  });

  function normalize(str) {
    return str.trim().toLowerCase().replace(/[^a-z0-9 ]/g, "").replace(/\s+/g, " ");
  }

  function submitQuiz() {
    let score = 0;
    const answersList = document.getElementById("correctAnswersList");
    answersList.innerHTML = "";

    questions.forEach((q, i) => {
      const userInput = document.querySelector(`[name="q${i}"]`).value;
      const answerDiv = document.getElementById(`a${i}`);
      const normalizedInput = normalize(userInput);

      const isCorrect = correctAnswers[i].some(ans => normalize(ans) === normalizedInput);

      if (isCorrect) {
        score++;
        answerDiv.style.color = "green";
      } else {
        answerDiv.style.color = "red";
      }

      answerDiv.innerText = "Correct Answer: " + correctAnswers[i][0];

      const li = document.createElement("li");
      li.innerText = `Q${i + 1}: ${correctAnswers[i][0]}`;
      answersList.appendChild(li);
    });

    document.getElementById("score").innerText = `You scored ${score} out of ${questions.length}`;
    document.getElementById("popup").style.display = "block";
    document.getElementById("overlay").style.display = "block";
  }

  function closePopup() {
    document.getElementById("popup").style.display = "none";
    document.getElementById("overlay").style.display = "none";
  }
</script>

</body>
</html>
